#include <md_tools.hpp>

#include "../../constants/offsets.hpp"

void alter_randomizer_credits(md::ROM& rom)
{
    // Change "LANDSTALKER" to "RANDSTALKER"
    rom.set_byte(offsets::CREDITS_TEXT + 0x2, 0x13);

    rom.set_bytes(offsets::CREDITS_TEXT + 0x14, { 
        0x27, 0x1C, 0x29, 0x1F, 0x2E, 0x2F, 0x1C, 0x27, 0x26, 0x20, 0x2D, 0x80, // "landstalker "
        0x2D, 0x1C, 0x29, 0x1F, 0x2A, 0x28, 0x24, 0x35, 0x20, 0x2D              // "randomizer"
    });

    // Widen the space between the end of the cast and the beginning of the rando staff
    rom.set_byte(offsets::CREDITS_TEXT + 0x5C, 0x0F);

    rom.set_bytes(offsets::CREDITS_TEXT + 0x75, { 
        // RANDOMIZER
        0x08, 0xFF, 0x82, 
        0x80, 0x13, 0x80, 0x02, 0x80, 0x0F, 0x80, 0x05, 0x80, 0x10, 0x80, 0x0E, 0x80, 0x0A, 0x80, 0x1B, 0x80, 0x06, 0x80, 0x13, 0x80, 0x00, 
        // developed by
        0x04, 0xFF, 0x81, 
        0x1F, 0x20, 0x31, 0x20, 0x27, 0x2A, 0x2B, 0x20, 0x1F, 0x80, 0x1D, 0x34, 0x00,
        // DINOPONY
        0x03, 0xFF,
        0x05, 0x0A, 0x0F, 0x10, 0x11, 0x10, 0x0F, 0x1A, 0x00,
        // WIZ
        0x08, 0xFF,
        0x18, 0x0A, 0x1B, 0x00,
        // testing
        0x04, 0xFF, 0x81,
        0x2F, 0x20, 0x2E, 0x2F, 0x24, 0x29, 0x22, 0x00,
        // SAGAZ
        0x03, 0xFF,
        0x14, 0x02, 0x08, 0x02, 0x1B, 0x00,
        // STIK
        0x03, 0xFF,
        0x14, 0x15, 0x0A, 0x0C, 0x00,
        // WIZ
        0x03, 0xFF,
        0x18, 0x0A, 0x1B, 0x00,
        // LANDRYLE
        0x08, 0xFF,
        0x0D, 0x02, 0x0F, 0x05, 0x13, 0x1A, 0x0D, 0x06, 0x00,
        // website by
        0x04, 0xFF, 0x81,
        0x32, 0x20, 0x1D, 0x2E, 0x24, 0x2F, 0x20, 0x80, 0x1D, 0x34, 0x00,
        // DILANDAU
        0x08, 0xFF,
        0x05, 0x0A, 0x0D, 0x02, 0x0F, 0x05, 0x02, 0x16, 0x00
    });

    std::vector<uint8_t> rest;
    rom.data_chunk(offsets::CREDITS_TEXT + 0x1D2, offsets::CREDITS_TEXT + 0x929, rest);
    rom.set_bytes(offsets::CREDITS_TEXT + 0xF5, rest);
    for(uint32_t addr = offsets::CREDITS_TEXT + 0xF5 + (uint32_t)rest.size() ; addr <= offsets::CREDITS_TEXT + 0x929 ; ++addr)
        rom.set_byte(addr, 0x00);
}
